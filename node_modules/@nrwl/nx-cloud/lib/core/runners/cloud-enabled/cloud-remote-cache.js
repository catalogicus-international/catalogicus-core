const a2_0x5cfb=['messages','extractErrorMessage','note','waitForStoreRequestsToComplete','VERBOSE_LOGGING','cache-miss','status','requests','../../../utilities/environment','.\x20Status\x20404.','fileStorage','../../../utilities/nx-imports','resolve','all','push','apply','throw','retrieve','store','axiosException','value','__awaiter','reduce','done','Nx\x20Cloud:\x20Skipping\x20storing\x20','next','cacheError','filter','response','hashUrls','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','CloudRemoteCache','startRun','statuses','Nx\x20Cloud:\x20Cache\x20miss\x20','forEach','__esModule','put','runContext','indexOf','storage','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','hash'];(function(_0x6086b7,_0x5cfb4b){const _0x344982=function(_0x51e5a1){while(--_0x51e5a1){_0x6086b7['push'](_0x6086b7['shift']());}};_0x344982(++_0x5cfb4b);}(a2_0x5cfb,0x7d));const a2_0x3449=function(_0x6086b7,_0x5cfb4b){_0x6086b7=_0x6086b7-0x0;let _0x344982=a2_0x5cfb[_0x6086b7];return _0x344982;};'use strict';var __awaiter=this&&this[a2_0x3449('0x19')]||function(_0x407169,_0x3ac636,_0x455e38,_0x2455b9){function _0x317245(_0x224f9c){return _0x224f9c instanceof _0x455e38?_0x224f9c:new _0x455e38(function(_0x333e7e){_0x333e7e(_0x224f9c);});}return new(_0x455e38||(_0x455e38=Promise))(function(_0x2fc9aa,_0x4bd3e5){function _0x330017(_0x42f806){try{_0x38eeb9(_0x2455b9[a2_0x3449('0x1d')](_0x42f806));}catch(_0x1f232c){_0x4bd3e5(_0x1f232c);}}function _0x4e6b98(_0xfbe599){try{_0x38eeb9(_0x2455b9[a2_0x3449('0x14')](_0xfbe599));}catch(_0x5eaf61){_0x4bd3e5(_0x5eaf61);}}function _0x38eeb9(_0x4ad1a8){_0x4ad1a8[a2_0x3449('0x1b')]?_0x2fc9aa(_0x4ad1a8[a2_0x3449('0x18')]):_0x317245(_0x4ad1a8[a2_0x3449('0x18')])['then'](_0x330017,_0x4e6b98);}_0x38eeb9((_0x2455b9=_0x2455b9[a2_0x3449('0x13')](_0x407169,_0x3ac636||[]))[a2_0x3449('0x1d')]());});};Object['defineProperty'](exports,a2_0x3449('0x28'),{'value':!![]});exports[a2_0x3449('0x23')]=void 0x0;const environment_1=require(a2_0x3449('0xc'));const {output}=require(a2_0x3449('0xf'));class CloudRemoteCache{constructor(_0x38b34a,_0x2e60f4,_0x51025a,_0x34cd7c){this['messages']=_0x38b34a;this['api']=_0x2e60f4;this[a2_0x3449('0x2a')]=_0x51025a;this[a2_0x3449('0xe')]=_0x34cd7c;this['storeRequests']=[];}[a2_0x3449('0x15')](_0x477a9f,_0x15587){var _0x263a06;return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x3449('0x1e')])return![];const _0x495886=yield this[a2_0x3449('0x21')](_0x477a9f);if(!_0x495886||!_0x495886['get']){if(environment_1[a2_0x3449('0x8')]){output['note']({'title':a2_0x3449('0x26')+_0x477a9f+'.'});}this[a2_0x3449('0x2a')][a2_0x3449('0x25')][_0x477a9f]=a2_0x3449('0x9');return![];}try{yield this[a2_0x3449('0xe')]['retrieve'](_0x477a9f,_0x495886['get'],_0x15587);this[a2_0x3449('0x2a')][a2_0x3449('0x25')][_0x477a9f]='remote-cache-hit';return!![];}catch(_0x5b43b9){const _0x4b2cb8=(_0x263a06=_0x5b43b9[a2_0x3449('0x17')])!==null&&_0x263a06!==void 0x0?_0x263a06:_0x5b43b9;if(_0x4b2cb8['response']&&_0x4b2cb8[a2_0x3449('0x20')][a2_0x3449('0xa')]===0x194){if(environment_1[a2_0x3449('0x8')]){output[a2_0x3449('0x6')]({'title':a2_0x3449('0x26')+_0x477a9f+a2_0x3449('0xd')});}}else{this[a2_0x3449('0x4')][a2_0x3449('0x1e')]=this['messages'][a2_0x3449('0x5')](_0x4b2cb8,a2_0x3449('0x1'));}this[a2_0x3449('0x2a')][a2_0x3449('0x25')][_0x477a9f]='cache-miss';return![];}});}[a2_0x3449('0x16')](_0x2f6fe7,_0x53ba10){return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x3449('0x1e')])return![];const _0x47fe14=Promise[a2_0x3449('0x10')]()['then'](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x5b5710;const _0x175225=yield this[a2_0x3449('0x21')](_0x2f6fe7);if(!_0x175225)return![];if(!_0x175225[a2_0x3449('0x29')]){if(environment_1[a2_0x3449('0x8')]){output[a2_0x3449('0x6')]({'title':a2_0x3449('0x1c')+_0x2f6fe7+'.','bodyLines':['There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.',a2_0x3449('0x2')]});}return!![];}try{yield this['fileStorage']['store'](_0x2f6fe7,_0x175225[a2_0x3449('0x29')],_0x53ba10);return!![];}catch(_0x17287f){const _0x1c1441=(_0x5b5710=_0x17287f[a2_0x3449('0x17')])!==null&&_0x5b5710!==void 0x0?_0x5b5710:_0x17287f;this[a2_0x3449('0x4')]['cacheError']=this[a2_0x3449('0x4')][a2_0x3449('0x5')](_0x1c1441,'storage');return![];}}));this['storeRequests'][a2_0x3449('0x12')](_0x47fe14);return _0x47fe14;});}[a2_0x3449('0x21')](_0x3b0fae){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x3b0fae in this[a2_0x3449('0x2a')]['requests']){return(yield this[a2_0x3449('0x2a')][a2_0x3449('0xb')][_0x3b0fae])[_0x3b0fae];}else{const _0x1a6c3f=this['runContext']['scheduledTasks'][a2_0x3449('0x1f')](_0x1701e1=>!this[a2_0x3449('0x2a')]['requests'][_0x1701e1[a2_0x3449('0x3')]])['map'](_0x3d8e81=>_0x3d8e81[a2_0x3449('0x3')]);if(_0x1a6c3f[a2_0x3449('0x0')](_0x3b0fae)===-0x1){_0x1a6c3f[a2_0x3449('0x12')](_0x3b0fae);}const _0x192f51=this['api'][a2_0x3449('0x24')](environment_1[a2_0x3449('0x22')],_0x1a6c3f);_0x1a6c3f[a2_0x3449('0x27')](_0x7bd2c9=>{this[a2_0x3449('0x2a')][a2_0x3449('0xb')][_0x7bd2c9]=_0x192f51;});return(yield _0x192f51)[_0x3b0fae];}});}[a2_0x3449('0x7')](){return Promise[a2_0x3449('0x11')](this['storeRequests'])['then'](_0x27e6b9=>_0x27e6b9[a2_0x3449('0x1a')]((_0x3c4323,_0x51c4dc)=>_0x3c4323&&_0x51c4dc,!![]));}}exports['CloudRemoteCache']=CloudRemoteCache;