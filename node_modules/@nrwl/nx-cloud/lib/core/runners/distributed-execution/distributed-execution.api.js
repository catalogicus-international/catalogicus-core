const a7_0x4095=['runGroup:\x20','parallel','error:\x20','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','serializeOverrides','throw','error','map','/nx-cloud/executions/start','agentCount','recordMetric','post','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','stringify','../../../utilities/environment','mapRespToPerfEntry','/nx-cloud/executions/status','stopAgentsOnFailure','Completing\x20run\x20group\x20with\x20an\x20error','../../../utilities/axios','axiosMultipleTries','apply','target','../../../utilities/serializer-overrides','hash','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','RUNNER_FAILURE_PERF_ENTRY','createApiAxiosInstance','next','/nx-cloud/executions/complete-run-group','DistributedExecutionApi','createStartRequest','response','completeRunGroup','../../../utilities/nx-imports','parseCommand','apiAxiosInstance','__esModule','maxParallel','exit','done','VERBOSE_LOGGING','defineProperty','createMetricRecorder','axiosException','then','project','note','data','start'];(function(_0x2c638b,_0x40952f){const _0x10c87e=function(_0x56892e){while(--_0x56892e){_0x2c638b['push'](_0x2c638b['shift']());}};_0x10c87e(++_0x40952f);}(a7_0x4095,0x11e));const a7_0x10c8=function(_0x2c638b,_0x40952f){_0x2c638b=_0x2c638b-0x0;let _0x10c87e=a7_0x4095[_0x2c638b];return _0x10c87e;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x5925d1,_0x77102b,_0x10ee5f,_0x147133){function _0x4e0d13(_0x16c841){return _0x16c841 instanceof _0x10ee5f?_0x16c841:new _0x10ee5f(function(_0x4e0dbd){_0x4e0dbd(_0x16c841);});}return new(_0x10ee5f||(_0x10ee5f=Promise))(function(_0x5c0c9c,_0x136a19){function _0x2d8706(_0x56369f){try{_0x23e799(_0x147133['next'](_0x56369f));}catch(_0x26531a){_0x136a19(_0x26531a);}}function _0x4452cd(_0x423181){try{_0x23e799(_0x147133[a7_0x10c8('0x13')](_0x423181));}catch(_0x73de25){_0x136a19(_0x73de25);}}function _0x23e799(_0x44b09b){_0x44b09b[a7_0x10c8('0x4')]?_0x5c0c9c(_0x44b09b['value']):_0x4e0d13(_0x44b09b['value'])[a7_0x10c8('0x9')](_0x2d8706,_0x4452cd);}_0x23e799((_0x147133=_0x147133[a7_0x10c8('0x23')](_0x5925d1,_0x77102b||[]))[a7_0x10c8('0x2a')]());});};Object[a7_0x10c8('0x6')](exports,a7_0x10c8('0x1'),{'value':!![]});exports['createStartRequest']=exports[a7_0x10c8('0x2c')]=void 0x0;const axios_1=require(a7_0x10c8('0x21'));const environment_1=require(a7_0x10c8('0x1c'));const metric_logger_1=require('../../../utilities/metric-logger');const serializer_overrides_1=require(a7_0x10c8('0x25'));const {output}=require(a7_0x10c8('0x30'));class DistributedExecutionApi{constructor(_0x10e645){this[a7_0x10c8('0x0')]=(0x0,axios_1[a7_0x10c8('0x29')])(_0x10e645);}[a7_0x10c8('0xd')](_0x12e07e){var _0x3643a0;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x73361=(0x0,metric_logger_1[a7_0x10c8('0x7')])('dteStart');let _0xa06ba;if(environment_1[a7_0x10c8('0x5')]){output['note']({'title':'Starting\x20a\x20distributed\x20execution','bodyLines':[JSON[a7_0x10c8('0x1b')](_0x12e07e,null,0x2)]});}try{_0xa06ba=yield(0x0,axios_1[a7_0x10c8('0x22')])(()=>this[a7_0x10c8('0x0')][a7_0x10c8('0x19')](a7_0x10c8('0x16'),_0x12e07e));_0x73361['recordMetric']((0x0,metric_logger_1['mapRespToPerfEntry'])(_0xa06ba));}catch(_0x29c248){_0x73361['recordMetric'](((_0x3643a0=_0x29c248===null||_0x29c248===void 0x0?void 0x0:_0x29c248[a7_0x10c8('0x8')])===null||_0x3643a0===void 0x0?void 0x0:_0x3643a0[a7_0x10c8('0x2e')])?(0x0,metric_logger_1[a7_0x10c8('0x1d')])(_0x29c248['axiosException'][a7_0x10c8('0x2e')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x29c248;}if(!_0xa06ba[a7_0x10c8('0xc')]['enabled']){throw new Error(a7_0x10c8('0x1a'));}if(_0xa06ba[a7_0x10c8('0xc')]['error']){throw new Error(_0xa06ba['data'][a7_0x10c8('0x14')]);}return _0xa06ba[a7_0x10c8('0xc')]['id'];});}['status'](_0x4dfc5e){var _0x4faf63;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3b390f=(0x0,metric_logger_1[a7_0x10c8('0x7')])('dteStatus');try{const _0x1335d4=yield(0x0,axios_1[a7_0x10c8('0x22')])(()=>this[a7_0x10c8('0x0')][a7_0x10c8('0x19')](a7_0x10c8('0x1e'),{'id':_0x4dfc5e}));_0x3b390f['recordMetric']((0x0,metric_logger_1[a7_0x10c8('0x1d')])(_0x1335d4));return _0x1335d4['data'];}catch(_0x15d0cd){_0x3b390f[a7_0x10c8('0x18')](((_0x4faf63=_0x15d0cd===null||_0x15d0cd===void 0x0?void 0x0:_0x15d0cd[a7_0x10c8('0x8')])===null||_0x4faf63===void 0x0?void 0x0:_0x4faf63[a7_0x10c8('0x2e')])?(0x0,metric_logger_1[a7_0x10c8('0x1d')])(_0x15d0cd[a7_0x10c8('0x8')][a7_0x10c8('0x2e')]):metric_logger_1[a7_0x10c8('0x28')]);output[a7_0x10c8('0x14')]({'title':_0x15d0cd['message']});process[a7_0x10c8('0x3')](0x1);}});}['completeRunGroupWithError'](_0x5962ea,_0x2f394c){var _0x1f5311;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4e4bd5=(0x0,metric_logger_1[a7_0x10c8('0x7')])(a7_0x10c8('0x2f'));if(environment_1['VERBOSE_LOGGING']){output[a7_0x10c8('0xb')]({'title':a7_0x10c8('0x20'),'bodyLines':[a7_0x10c8('0xe')+_0x5962ea,a7_0x10c8('0x10')+_0x2f394c]});}try{const _0x3950b1=yield(0x0,axios_1[a7_0x10c8('0x22')])(()=>this['apiAxiosInstance'][a7_0x10c8('0x19')](a7_0x10c8('0x2b'),{'runGroup':_0x5962ea,'criticalErrorMessage':_0x2f394c}),0x3);_0x4e4bd5[a7_0x10c8('0x18')]((0x0,metric_logger_1[a7_0x10c8('0x1d')])(_0x3950b1));}catch(_0xf47a0e){_0x4e4bd5[a7_0x10c8('0x18')](((_0x1f5311=_0xf47a0e===null||_0xf47a0e===void 0x0?void 0x0:_0xf47a0e[a7_0x10c8('0x8')])===null||_0x1f5311===void 0x0?void 0x0:_0x1f5311[a7_0x10c8('0x2e')])?(0x0,metric_logger_1[a7_0x10c8('0x1d')])(_0xf47a0e[a7_0x10c8('0x8')][a7_0x10c8('0x2e')]):metric_logger_1[a7_0x10c8('0x28')]);}});}}exports['DistributedExecutionApi']=DistributedExecutionApi;function createStartRequest(_0x30af0c,_0x35026b,_0xa5fa53){const _0x3036f3=_0x35026b[a7_0x10c8('0x15')](_0x195c00=>{return _0x195c00[a7_0x10c8('0x15')](_0x2de703=>{return{'taskId':_0x2de703['id'],'hash':_0x2de703[a7_0x10c8('0x26')],'projectName':_0x2de703[a7_0x10c8('0x24')][a7_0x10c8('0xa')],'target':_0x2de703[a7_0x10c8('0x24')]['target'],'configuration':_0x2de703['target']['configuration']||null,'params':(0x0,serializer_overrides_1[a7_0x10c8('0x12')])(_0x2de703)};});});const _0x13dffd={'command':(0x0,environment_1[a7_0x10c8('0x31')])(),'branch':(0x0,environment_1['getBranch'])(),'runGroup':_0x30af0c,'tasks':_0x3036f3,'maxParallel':calculateMaxParallel(_0xa5fa53)};if(environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT']){_0x13dffd[a7_0x10c8('0x17')]=environment_1[a7_0x10c8('0x11')];}if(!environment_1[a7_0x10c8('0x27')]){_0x13dffd[a7_0x10c8('0x1f')]=![];}return _0x13dffd;}exports[a7_0x10c8('0x2d')]=createStartRequest;function calculateMaxParallel(_0xf550aa){if(_0xf550aa[a7_0x10c8('0xf')]==='false'||_0xf550aa[a7_0x10c8('0xf')]===![]){return 0x1;}else if(_0xf550aa[a7_0x10c8('0xf')]==='true'||_0xf550aa[a7_0x10c8('0xf')]===!![]){return Number(_0xf550aa[a7_0x10c8('0x2')]||0x3);}else if(_0xf550aa[a7_0x10c8('0xf')]===undefined){return _0xf550aa[a7_0x10c8('0x2')]?Number(_0xf550aa[a7_0x10c8('0x2')]):0x3;}else{return Number(_0xf550aa[a7_0x10c8('0xf')])||0x3;}}