"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addRouterRootConfiguration = void 0;
const ast_utils_1 = require("@nrwl/workspace/src/utilities/ast-utils");
const ast_utils_2 = require("../../../utils/nx-devkit/ast-utils");
const ensure_typescript_1 = require("@nrwl/js/src/utils/typescript/ensure-typescript");
let tsModule;
function addRouterRootConfiguration(host, options) {
    const modulePath = `${options.appProjectRoot}/src/app/app.module.ts`;
    const moduleSource = host.read(modulePath, 'utf-8');
    if (!tsModule) {
        tsModule = (0, ensure_typescript_1.ensureTypescript)();
    }
    let sourceFile = tsModule.createSourceFile(modulePath, moduleSource, tsModule.ScriptTarget.Latest, true);
    sourceFile = (0, ast_utils_1.insertImport)(host, sourceFile, modulePath, 'RouterModule', '@angular/router');
    sourceFile = (0, ast_utils_1.insertImport)(host, sourceFile, modulePath, 'appRoutes', './app.routes');
    sourceFile = (0, ast_utils_2.addImportToModule)(host, sourceFile, modulePath, `RouterModule.forRoot(appRoutes, {initialNavigation: 'enabledBlocking'})`);
}
exports.addRouterRootConfiguration = addRouterRootConfiguration;
//# sourceMappingURL=root-router-config.js.map